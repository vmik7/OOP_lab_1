# Лабораторная работа № 1 (Функции С++)

## Задание

Из целочисленного массива `x(n)` записать в массив `y(m)` все элементы,
превышающие среднее арифметическое значение всех элементов
массива `x`. Удалить в массивах все элементы, не являющиеся
простыми числами. В программе написать функции: формирования
массива `y`, определения среднего арифметического элементов,
удаления элемента.


## Описание пользовательского интерфейса программы

При запуске программа попросит ввести количество элементов массива `x`, а также предложит заполнить его случайными числами.
Если пользователь захочет ввести массив самостоятельно - программа предложит удобный интерфейс ввода.

Далее будут выведены оба массива `x` и `y` после заполнения, а также среднее арифметическое массива `x`.

После того, как из обоих массивов будут удалены числа, не являющиеся простыми, программа вновь выведет их на экран и завершит свою работу.


## Описание используемых алгоритмов и структур данных

### Функции `is_less`, `is_equal`, `is_greater`

Нужны для корректного сравнения числе с плавающей точкой (с учётом погрешности).

Точность сравнения задаётся константой `EPS`:
```
const double EPS = 1e-7;
```

Также эти функции было решено сделать встроенными (с помощью ключевого слова `inline`).
Теперь все вызовы этих функций будут фактически заменены их исходным кодом.
За счет того, что сами функции невелеки по объему, их инлайн ускорит выполнение программы.

### Функция `print_arr`

Печатает на экран сперва размер массива, а затем весь массив в одну строку.

Массив передаётся в функцию по указателю с ключевым словом `const` для защиты от изменений.

### Функция `mean`

Вычисляет среднее арифметическое числового массива.

Массив передаётся в функцию по указателю с ключевым словом `const` для защиты от изменений.

### Функция `fill_y`

Производит заполнение массива `y` по описанным в условии правилам.

Массив `x` передается в функцию по указателю вместе с его размером `n`.

Заранее сказать, сколько элементов будет в массиве `y` невозможно, поэтому в функцию передаётся указатель на будущий массив (память для него будет выделенна динамически с помощью операции `new`), а его размер `m` передаётся по ссылке для возможности его изменять. 

### Функция `is_prime`

Проверяет число на простоту используя метод перебора всех возможных делителей числа.


## Пример работы программы

```
Введите количество элементов: 10
Заполнить массив случайными числами? (y/n) : y

Массив x(n) после заполнения:
10
8 50 74 59 31 73 45 79 24 10 

Среденее арифметическое массива x(n):
45.3

Массив y(m) после заполнения:
5
50 74 59 73 79 

Массив x(n) после удаления всех чисел, не являющихся простыми:
4
59 31 73 79 

Массив y(m) после удаления всех чисел, не являющихся простыми:
3
59 73 79
```



## Исходный код

(Находится в файле `main.cpp`)

```
#include <iostream>
#include <cstdlib>

using namespace std;

// Верхняя граница диапазона случайных чисел
const int MAX_VAL = 100;

// Точность сравнения чисел с плавающей точкой
const double EPS = 1e-7;

// Функции корректного сравнения чисел с плавающей точкой
inline bool is_less(double a, double b) {
    return a < b - EPS;
}
inline bool is_equal(double a, double b) {
    return b - EPS < a && a < b + EPS;
}
inline bool is_greater(double a, double b) {
    return b + EPS < a;
}

// Функция вывода массива на экран
void print_arr(const int a[], int n);

// Функция определения среднего арифметического
double mean(const int a[], int n);

// Функция заполнения массива y(m)
void fill_y(int x[], int n, int * y[], int& m);

// Функция удаления элемента из массива (без перераспределения памяти)
void del(int a[], int& n, int pos);

// Функция проверки числа на простоту
bool is_prime(int n);


int main() {

    // Заполнение массива x(n)

    cout << "Введите количество элементов: ";

    int n;
    cin >> n;

    int * x = new int[n];

    string ans = "";
    while (ans != "y" && ans != "n") {
        cout << "Заполнить массив случайными числами? (y/n) : ";
        cin >> ans;
    }

    if (ans == "y") {

        // Заполнение случайными числами

        for (int i = 0; i < n; i++)
            x[i] = rand() % MAX_VAL + 1;
    }
    else {

        // Заполнение с клавиатуры

        for (int i = 0; i < n; i++) {
            cout << "x[" << i << "] = ";
            cin >> x[i];
        }
    }

    cout << "\nМассив x(n) после заполнения:\n";
    print_arr(x, n);


    // Заполнение массива y(m)

    int m;
    int * y;

    fill_y(x, n, &y, m);

    cout << "\nМассив y(m) после заполнения:\n";
    print_arr(y, m);


    // Удаление в x(n) и y(m) всех чисел, не являющихся простыми

    int pos_x = 0;
    while (pos_x < n) {
        if (is_prime(x[pos_x]))
            pos_x++;
        else
            del(x, n, pos_x);
    }

    int pos_y = 0;
    while (pos_y < m) {
        if (is_prime(y[pos_y]))
            pos_y++;
        else
            del(y, m, pos_y);
    }


    // Вывод получившихся массивов на экран

    cout << "\nМассив x(n) после удаления всех чисел, не являющихся простыми:\n";
    print_arr(x, n);

    cout << "\nМассив y(m) после удаления всех чисел, не являющихся простыми:\n";
    print_arr(y, m);


    // Освобождение памяти, выделенной под динамические массивы

    delete[] x;
    delete[] y;


    return 0;
}


void print_arr(const int a[], int n) {
    cout << n << endl;
    for (int i = 0; i < n; i++)
        cout << a[i] << " ";
    cout << endl;
}

void del(int a[], int& n, int pos) {
    for (int i = pos; i < n - 1; i++)
        a[i] = a[i + 1];
    n--;
    return;
}

double mean(const int a[], int n) {
    double sum = 0;
    for (int i = 0; i < n; i++)
        sum += a[i];
    return sum / n;
}

void fill_y(int x[], int n, int * y[], int& m) {

    double mean_val = mean(x, n);

    cout << "\nСреденее арифметическое массива x(n):\n";
    cout << mean_val << endl;

    m = 0;
    for (int i = 0; i < n; i++) {
        if (is_greater(x[i], mean_val))
            m++;
    }

    int * tmp = new int[m];

    int j = 0;
    for (int i = 0; i < n; i++) {
        if (is_greater(x[i], mean_val))
            tmp[j++] = x[i];
    }

    *y = tmp;

    return;
}

bool is_prime(int n) {
    if (n <= 1) return false;
    for (int i = 2; i * i <= n; i++) {
        if (n % i == 0)
            return false;
    }
    return true;
}
```
